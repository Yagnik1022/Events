<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sign in to your EventFlow Pro account to manage events and bookings">
  <meta name="keywords" content="login, sign in, event management, account access">
  <meta name="author" content="EventFlow Pro">
  
  <!-- Open Graph / Social Media Meta Tags -->
  <meta property="og:title" content="Sign In - EventFlow Pro">
  <meta property="og:description" content="Access your EventFlow Pro account to manage events and bookings">
  <meta property="og:image" content="/assets/images/logo/og-image.jpg">
  <meta property="og:url" content="https://eventflowpro.com/login">
  <meta property="og:type" content="website">
  
  <title>Sign In - EventFlow Pro</title>
  
  <!-- CSS Stylesheets -->
  <link rel="stylesheet" href="/assets/css/themes.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/animations.css">
  <link rel="stylesheet" href="/assets/css/responsive.css">
  <link rel="stylesheet" href="/assets/css/forms.css">
  
  <!-- Favicon -->
  <link rel="icon" href="/assets/images/logo/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/assets/images/logo/favicon.ico" type="image/x-icon">
</head>
<body>
  <!-- Page Loader -->
  <div class="page-loader">
    <div class="loader-spinner"></div>
  </div>
  
  <!-- Header Component (will be loaded via JavaScript) -->
  <header id="site-header" class="site-header"></header>
  
  <!-- Mobile Navigation (will be loaded via JavaScript) -->
  <div id="mobile-nav-container"></div>
  
  <!-- Main Content -->
  <main>
    <section class="auth-section section-padding">
      <div class="container">
        <div class="auth-container">
          <div class="auth-card">
            <div class="auth-header">
              <h1 class="auth-title">Sign In</h1>
              <p class="auth-subtitle">Welcome back! Please sign in to access your account.</p>
            </div>
            
            <!-- Alert for error messages -->
            <div class="alert alert-danger" id="login-error" style="display: none;">
              <div class="alert-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="8" x2="12" y2="12"></line>
                  <line x1="12" y1="16" x2="12.01" y2="16"></line>
                </svg>
              </div>
              <div class="alert-content" id="login-error-message"></div>
            </div>
            
            <form id="login-form" class="auth-form">
              <div class="form-group">
                <label for="login-email">Email Address</label>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                      </svg>
                    </span>
                  </div>
                  <input type="email" id="login-email" name="email" class="form-control" placeholder="your.email@example.com" required>
                </div>
                <div class="form-feedback" id="email-feedback"></div>
              </div>
              
              <div class="form-group">
                <div class="label-group">
                  <label for="login-password">Password</label>
                  <a href="#" class="forgot-password-link" id="forgot-password-link">Forgot Password?</a>
                </div>
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                      </svg>
                    </span>
                  </div>
                  <input type="password" id="login-password" name="password" class="form-control" placeholder="••••••••" required>
                  <div class="input-group-append">
                    <button type="button" class="password-toggle" id="password-toggle">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="password-toggle-icon-show">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                      </svg>
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="password-toggle-icon-hide" style="display: none;">
                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                        <line x1="1" y1="1" x2="23" y2="23"></line>
                      </svg>
                    </button>
                  </div>
                </div>
                <div class="form-feedback" id="password-feedback"></div>
              </div>
              
              <div class="form-check">
                <input type="checkbox" id="remember-me" name="remember" class="form-check-input">
                <label for="remember-me" class="form-check-label">Remember me</label>
              </div>
              
              <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-block" id="login-submit-btn">
                  <span class="btn-text">Sign In</span>
                  <span class="btn-loader" style="display: none;">
                    <svg class="spinner" viewBox="0 0 50 50">
                      <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                    </svg>
                  </span>
                </button>
              </div>
            </form>
            
            <div class="auth-divider">
              <span class="auth-divider-text">OR</span>
            </div>
            
            <div class="social-login">
              <button type="button" class="btn btn-social btn-google">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"/>
                </svg>
                <span>Sign in with Google</span>
              </button>
              
              <button type="button" class="btn btn-social btn-facebook">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20.9,2H3.1A1.1,1.1,0,0,0,2,3.1V20.9A1.1,1.1,0,0,0,3.1,22h9.58V14.25h-2.6v-3h2.6V9a3.64,3.64,0,0,1,3.88-4,20.26,20.26,0,0,1,2.33.12v2.7H17.3c-1.26,0-1.5.6-1.5,1.47v1.93h3l-.39,3H15.8V22h5.1A1.1,1.1,0,0,0,22,20.9V3.1A1.1,1.1,0,0,0,20.9,2Z"/>
                </svg>
                <span>Sign in with Facebook</span>
              </button>
            </div>
            
            <div class="auth-footer">
              <p class="auth-footer-text">Don't have an account? <a href="/pages/register.html" class="auth-link">Sign Up</a></p>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Forgot Password Modal -->
    <div class="modal" id="forgot-password-modal">
      <div class="modal-overlay"></div>
      <div class="modal-container">
        <div class="modal-header">
          <h3 class="modal-title">Reset Password</h3>
          <button type="button" class="modal-close" id="close-forgot-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div class="modal-body">
          <p class="modal-description">Enter your email address and we'll send you instructions to reset your password.</p>
          
          <form id="forgot-password-form">
            <div class="form-group">
              <label for="forgot-email">Email Address</label>
              <input type="email" id="forgot-email" name="email" class="form-control" placeholder="your.email@example.com" required>
              <div class="form-feedback" id="forgot-email-feedback"></div>
            </div>
            
            <div class="form-actions">
              <button type="submit" class="btn btn-primary btn-block" id="forgot-submit-btn">
                <span class="btn-text">Send Reset Link</span>
                <span class="btn-loader" style="display: none;">
                  <svg class="spinner" viewBox="0 0 50 50">
                    <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
                  </svg>
                </span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <!-- Reset Success Modal -->
    <div class="modal" id="reset-success-modal">
      <div class="modal-overlay"></div>
      <div class="modal-container">
        <div class="modal-header">
          <h3 class="modal-title">Email Sent</h3>
          <button type="button" class="modal-close" id="close-success-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div class="modal-body">
          <div class="success-content">
            <div class="success-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
            </div>
            <h4 class="success-title">Check Your Email</h4>
            <p class="success-message">We've sent password reset instructions to your email address. Please check your inbox.</p>
            <div class="success-actions">
              <button type="button" class="btn btn-primary" id="close-success-btn">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Footer Component (will be loaded via JavaScript) -->
  <footer id="site-footer" class="site-footer"></footer>
  
  <!-- JavaScript Files -->
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/theme-toggle.js"></script>
  <script src="/assets/js/navigation.js"></script>
  <script src="/assets/js/animations.js"></script>
  <script src="/assets/js/validation.js"></script>
  <script src="/assets/js/auth.js"></script>
  <script src="/assets/js/storage.js"></script>
  <script src="/assets/js/utils.js"></script>
  
  <!-- Page-specific JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOM Elements
      const loginForm = document.getElementById('login-form');
      const loginEmail = document.getElementById('login-email');
      const loginPassword = document.getElementById('login-password');
      const loginSubmitBtn = document.getElementById('login-submit-btn');
      const loginError = document.getElementById('login-error');
      const loginErrorMessage = document.getElementById('login-error-message');
      const passwordToggle = document.getElementById('password-toggle');
      const forgotPasswordLink = document.getElementById('forgot-password-link');
      const forgotPasswordModal = document.getElementById('forgot-password-modal');
      const closeForgotModal = document.getElementById('close-forgot-modal');
      const forgotPasswordForm = document.getElementById('forgot-password-form');
      const forgotEmail = document.getElementById('forgot-email');
      const forgotSubmitBtn = document.getElementById('forgot-submit-btn');
      const resetSuccessModal = document.getElementById('reset-success-modal');
      const closeSuccessModal = document.getElementById('close-success-modal');
      const closeSuccessBtn = document.getElementById('close-success-btn');
      
      // Check if user is already logged in
      if (isUserLoggedIn()) {
        window.location.href = '/pages/dashboard.html';
      }
      
      // Password visibility toggle
      if (passwordToggle) {
        passwordToggle.addEventListener('click', function() {
          const passwordInput = document.getElementById('login-password');
          const showIcon = this.querySelector('.password-toggle-icon-show');
          const hideIcon = this.querySelector('.password-toggle-icon-hide');
          
          if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            showIcon.style.display = 'none';
            hideIcon.style.display = 'block';
          } else {
            passwordInput.type = 'password';
            showIcon.style.display = 'block';
            hideIcon.style.display = 'none';
          }
        });
      }
      
      // Login form submission
      if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Hide previous error messages
          loginError.style.display = 'none';
          
          // Show loading state
          loginSubmitBtn.querySelector('.btn-text').style.display = 'none';
          loginSubmitBtn.querySelector('.btn-loader').style.display = 'inline-block';
          loginSubmitBtn.disabled = true;
          
          // Get form values
          const email = loginEmail.value.trim();
          const password = loginPassword.value.trim();
          const rememberMe = document.getElementById('remember-me').checked;
          
          // Validate form
          let isValid = true;
          
          if (!email) {
            showValidationError(loginEmail, 'Email is required');
            isValid = false;
          } else if (!isValidEmail(email)) {
            showValidationError(loginEmail, 'Please enter a valid email address');
            isValid = false;
          }
          
          if (!password) {
            showValidationError(loginPassword, 'Password is required');
            isValid = false;
          }
          
          if (!isValid) {
            // Reset button state
            loginSubmitBtn.querySelector('.btn-text').style.display = 'inline-block';
            loginSubmitBtn.querySelector('.btn-loader').style.display = 'none';
            loginSubmitBtn.disabled = false;
            return;
          }
          
          // Simulate API call delay
          setTimeout(function() {
            // Attempt to login
            const loginResult = loginUser(email, password, rememberMe);
            
            if (loginResult.success) {
              // Redirect to dashboard
              window.location.href = '/pages/dashboard.html';
            } else {
              // Show error message
              loginError.style.display = 'flex';
              loginErrorMessage.textContent = loginResult.message;
              
              // Reset button state
              loginSubmitBtn.querySelector('.btn-text').style.display = 'inline-block';
              loginSubmitBtn.querySelector('.btn-loader').style.display = 'none';
              loginSubmitBtn.disabled = false;
            }
          }, 1000);
        });
      }
      
      // Forgot password modal
      if (forgotPasswordLink) {
        forgotPasswordLink.addEventListener('click', function(e) {
          e.preventDefault();
          forgotPasswordModal.classList.add('show');
          document.body.classList.add('modal-open');
          forgotEmail.focus();
        });
      }
      
      if (closeForgotModal) {
        closeForgotModal.addEventListener('click', function() {
          forgotPasswordModal.classList.remove('show');
          document.body.classList.remove('modal-open');
        });
      }
      
      // Forgot password form submission
      if (forgotPasswordForm) {
        forgotPasswordForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const email = forgotEmail.value.trim();
          let isValid = true;
          
          // Show loading state
          forgotSubmitBtn.querySelector('.btn-text').style.display = 'none';
          forgotSubmitBtn.querySelector('.btn-loader').style.display = 'inline-block';
          forgotSubmitBtn.disabled = true;
          
          if (!email) {
            showValidationError(forgotEmail, 'Email is required');
            isValid = false;
          } else if (!isValidEmail(email)) {
            showValidationError(forgotEmail, 'Please enter a valid email address');
            isValid = false;
          }
          
          if (!isValid) {
            // Reset button state
            forgotSubmitBtn.querySelector('.btn-text').style.display = 'inline-block';
            forgotSubmitBtn.querySelector('.btn-loader').style.display = 'none';
            forgotSubmitBtn.disabled = false;
            return;
          }
          
          // Simulate API call delay
          setTimeout(function() {
            // In a real app, this would send a request to the server
            // For demo purposes, we'll just show the success modal
            forgotPasswordModal.classList.remove('show');
            resetSuccessModal.classList.add('show');
            
            // Reset form and button state
            forgotPasswordForm.reset();
            forgotSubmitBtn.querySelector('.btn-text').style.display = 'inline-block';
            forgotSubmitBtn.querySelector('.btn-loader').style.display = 'none';
            forgotSubmitBtn.disabled = false;
          }, 1000);
        });
      }
      
      // Reset success modal
      if (closeSuccessModal) {
        closeSuccessModal.addEventListener('click', function() {
          resetSuccessModal.classList.remove('show');
          document.body.classList.remove('modal-open');
        });
      }
      
      if (closeSuccessBtn) {
        closeSuccessBtn.addEventListener('click', function() {
          resetSuccessModal.classList.remove('show');
          document.body.classList.remove('modal-open');
        });
      }
      
      // Helper functions
      function showValidationError(field, message) {
        field.classList.add('is-invalid');
        const feedbackElement = field.parentElement.nextElementSibling;
        
        if (feedbackElement && feedbackElement.classList.contains('form-feedback')) {
          feedbackElement.textContent = message;
          feedbackElement.classList.add('error');
        }
      }
      
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      
      // These functions would be defined in auth.js in a real implementation
      // For demo purposes, we'll define them here
      function isUserLoggedIn() {
        const session = localStorage.getItem('userSession');
        if (!session) return false;
        
        try {
          const sessionData = JSON.parse(session);
          return sessionData && sessionData.isLoggedIn && new Date(sessionData.expiresAt) > new Date();
        } catch (e) {
          return false;
        }
      }
      
      function loginUser(email, password, rememberMe) {
        // In a real app, this would make an API call to authenticate the user
        // For demo purposes, we'll check against sample users in localStorage
        
        try {
          // Get users from localStorage
          const usersJson = localStorage.getItem('users');
          const users = usersJson ? JSON.parse(usersJson) : [];
          
          // Find user with matching email
          const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
          
          if (!user) {
            return {
              success: false,
              message: 'No account found with this email address'
            };
          }
          
          // Check password (in a real app, this would use proper password hashing)
          if (user.password !== password) {
            return {
              success: false,
              message: 'Incorrect password'
            };
          }
          
          // Create session
          const expiresAt = rememberMe 
            ? new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 days
            : new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 hours
          
          const session = {
            userId: user.id,
            name: user.name,
            email: user.email,
            isLoggedIn: true,
            expiresAt: expiresAt.toISOString(),
            rememberMe: rememberMe
          };
          
          // Save session to localStorage
          localStorage.setItem('userSession', JSON.stringify(session));
          
          return {
            success: true,
            user: {
              id: user.id,
              name: user.name,
              email: user.email
            }
          };
        } catch (e) {
          console.error('Login error:', e);
          return {
            success: false,
            message: 'An error occurred during login. Please try again.'
          };
        }
      }
    });
  </script>
</body>
</html>