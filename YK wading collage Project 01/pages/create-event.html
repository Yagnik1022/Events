<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="EventFlow Pro - Create a new event">
  <meta name="keywords" content="create event, event management, event planning">
  <meta name="author" content="EventFlow Pro">
  
  <!-- Open Graph / Social Media Meta Tags -->
  <meta property="og:title" content="Create Event - EventFlow Pro">
  <meta property="og:description" content="Create and manage your events with EventFlow Pro">
  <meta property="og:image" content="/assets/images/logo/og-image.jpg">
  <meta property="og:url" content="https://eventflowpro.com/create-event">
  <meta property="og:type" content="website">
  
  <title>Create Event - EventFlow Pro</title>
  
  <!-- CSS Stylesheets -->
  <link rel="stylesheet" href="/assets/css/themes.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  <link rel="stylesheet" href="/assets/css/animations.css">
  <link rel="stylesheet" href="/assets/css/responsive.css">
  <link rel="stylesheet" href="/assets/css/forms.css">
  
  <!-- Favicon -->
  <link rel="icon" href="/assets/images/logo/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="/assets/images/logo/favicon.ico" type="image/x-icon">
</head>
<body>
  <!-- Page Loader -->
  <div class="page-loader">
    <div class="loader-spinner"></div>
  </div>
  
  <!-- Header Component (will be loaded via JavaScript) -->
  <header id="site-header" class="site-header"></header>
  
  <!-- Mobile Navigation (will be loaded via JavaScript) -->
  <div id="mobile-nav-container"></div>
  
  <!-- Main Content -->
  <main>
    <!-- Create Event Section -->
    <section class="create-event-section section-padding">
      <div class="container">
        <div class="section-header">
          <h1 class="section-title">Create New Event</h1>
          <p class="section-description">Fill in the details below to create your event. All fields marked with * are required.</p>
        </div>
        
        <div class="create-event-container">
          <form id="create-event-form" class="create-event-form">
            <!-- Basic Information -->
            <div class="form-section">
              <h2 class="form-section-title">Basic Information</h2>
              
              <div class="form-group">
                <label for="event-title">Event Title *</label>
                <input type="text" id="event-title" name="title" class="form-control" required>
                <div class="form-feedback"></div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="event-category">Category *</label>
                  <select id="event-category" name="category" class="form-control" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="Conference">Conference</option>
                    <option value="Workshop">Workshop</option>
                    <option value="Seminar">Seminar</option>
                    <option value="Networking">Networking</option>
                    <option value="Concert">Concert</option>
                    <option value="Exhibition">Exhibition</option>
                    <option value="Party">Party</option>
                    <option value="Other">Other</option>
                  </select>
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="event-type">Event Type *</label>
                  <select id="event-type" name="type" class="form-control" required>
                    <option value="" disabled selected>Select type</option>
                    <option value="In-Person">In-Person</option>
                    <option value="Virtual">Virtual</option>
                    <option value="Hybrid">Hybrid</option>
                  </select>
                  <div class="form-feedback"></div>
                </div>
              </div>
              
              <div class="form-group">
                <label for="event-description">Event Description *</label>
                <textarea id="event-description" name="description" class="form-control" rows="5" required></textarea>
                <div class="form-feedback"></div>
                <div class="character-count"><span id="description-chars">0</span>/500 characters</div>
              </div>
              
              <div class="form-group">
                <label for="event-tags">Tags (comma separated)</label>
                <input type="text" id="event-tags" name="tags" class="form-control" placeholder="e.g. technology, networking, innovation">
                <div class="form-feedback"></div>
              </div>
            </div>
            
            <!-- Date & Time -->
            <div class="form-section">
              <h2 class="form-section-title">Date & Time</h2>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="event-date">Event Date *</label>
                  <input type="date" id="event-date" name="date" class="form-control" required>
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="event-time">Start Time *</label>
                  <input type="time" id="event-time" name="time" class="form-control" required>
                  <div class="form-feedback"></div>
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="event-end-date">End Date</label>
                  <input type="date" id="event-end-date" name="endDate" class="form-control">
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="event-end-time">End Time</label>
                  <input type="time" id="event-end-time" name="endTime" class="form-control">
                  <div class="form-feedback"></div>
                </div>
              </div>
              
              <div class="form-check">
                <input type="checkbox" id="all-day-event" name="allDay" class="form-check-input">
                <label for="all-day-event" class="form-check-label">All-day event</label>
              </div>
            </div>
            
            <!-- Location -->
            <div class="form-section">
              <h2 class="form-section-title">Location</h2>
              
              <div id="location-type-selector" class="form-group">
                <label>Location Type *</label>
                <div class="radio-group">
                  <div class="radio-option">
                    <input type="radio" id="physical-location" name="locationType" value="physical" checked>
                    <label for="physical-location">Physical Location</label>
                  </div>
                  <div class="radio-option">
                    <input type="radio" id="virtual-location" name="locationType" value="virtual">
                    <label for="virtual-location">Virtual Event</label>
                  </div>
                </div>
              </div>
              
              <div id="physical-location-fields">
                <div class="form-group">
                  <label for="venue-name">Venue Name *</label>
                  <input type="text" id="venue-name" name="venueName" class="form-control">
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="venue-address">Address *</label>
                  <input type="text" id="venue-address" name="venueAddress" class="form-control">
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="venue-city">City *</label>
                    <input type="text" id="venue-city" name="venueCity" class="form-control">
                    <div class="form-feedback"></div>
                  </div>
                  
                  <div class="form-group">
                    <label for="venue-state">State/Province *</label>
                    <input type="text" id="venue-state" name="venueState" class="form-control">
                    <div class="form-feedback"></div>
                  </div>
                  
                  <div class="form-group">
                    <label for="venue-zip">Zip/Postal Code *</label>
                    <input type="text" id="venue-zip" name="venueZip" class="form-control">
                    <div class="form-feedback"></div>
                  </div>
                </div>
              </div>
              
              <div id="virtual-location-fields" class="hidden">
                <div class="form-group">
                  <label for="virtual-event-url">Event URL *</label>
                  <input type="url" id="virtual-event-url" name="virtualEventUrl" class="form-control" placeholder="https://">
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="virtual-platform">Platform *</label>
                  <select id="virtual-platform" name="virtualPlatform" class="form-control">
                    <option value="" disabled selected>Select platform</option>
                    <option value="Zoom">Zoom</option>
                    <option value="Microsoft Teams">Microsoft Teams</option>
                    <option value="Google Meet">Google Meet</option>
                    <option value="Webex">Webex</option>
                    <option value="Other">Other</option>
                  </select>
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="virtual-instructions">Access Instructions</label>
                  <textarea id="virtual-instructions" name="virtualInstructions" class="form-control" rows="3" placeholder="Provide any special instructions for accessing the virtual event"></textarea>
                </div>
              </div>
            </div>
            
            <!-- Tickets & Capacity -->
            <div class="form-section">
              <h2 class="form-section-title">Tickets & Capacity</h2>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="event-capacity">Maximum Capacity *</label>
                  <input type="number" id="event-capacity" name="capacity" class="form-control" min="1" required>
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="ticket-price">Ticket Price ($) *</label>
                  <input type="number" id="ticket-price" name="price" class="form-control" min="0" step="0.01" required>
                  <div class="form-feedback"></div>
                </div>
              </div>
              
              <div class="form-check">
                <input type="checkbox" id="free-event" name="freeEvent" class="form-check-input">
                <label for="free-event" class="form-check-label">This is a free event</label>
              </div>
              
              <div class="form-group">
                <label for="registration-deadline">Registration Deadline</label>
                <input type="datetime-local" id="registration-deadline" name="registrationDeadline" class="form-control">
                <div class="form-feedback"></div>
              </div>
            </div>
            
            <!-- Event Image -->
            <div class="form-section">
              <h2 class="form-section-title">Event Image</h2>
              
              <div class="form-group">
                <label for="event-image">Upload Event Image</label>
                <div class="file-upload-container">
                  <div class="file-upload-preview" id="image-preview">
                    <img src="/assets/images/events/placeholder.jpg" alt="Event Image Preview" id="preview-image">
                  </div>
                  <div class="file-upload-controls">
                    <label for="event-image" class="file-upload-btn">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                      </svg>
                      Choose File
                    </label>
                    <input type="file" id="event-image" name="image" class="file-upload-input" accept="image/*">
                    <button type="button" class="btn btn-outline-danger btn-sm" id="remove-image">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                      </svg>
                      Remove
                    </button>
                  </div>
                </div>
                <div class="form-hint">Recommended size: 1200 x 600 pixels, max 2MB. JPG or PNG format.</div>
              </div>
            </div>
            
            <!-- Organizer Information -->
            <div class="form-section">
              <h2 class="form-section-title">Organizer Information</h2>
              
              <div class="form-group">
                <label for="organizer-name">Organizer Name *</label>
                <input type="text" id="organizer-name" name="organizerName" class="form-control" required>
                <div class="form-feedback"></div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="organizer-email">Contact Email *</label>
                  <input type="email" id="organizer-email" name="organizerEmail" class="form-control" required>
                  <div class="form-feedback"></div>
                </div>
                
                <div class="form-group">
                  <label for="organizer-phone">Contact Phone</label>
                  <input type="tel" id="organizer-phone" name="organizerPhone" class="form-control">
                  <div class="form-feedback"></div>
                </div>
              </div>
              
              <div class="form-group">
                <label for="organizer-website">Website</label>
                <input type="url" id="organizer-website" name="organizerWebsite" class="form-control" placeholder="https://">
                <div class="form-feedback"></div>
              </div>
            </div>
            
            <!-- Additional Information -->
            <div class="form-section">
              <h2 class="form-section-title">Additional Information</h2>
              
              <div class="form-group">
                <label for="event-notes">Additional Notes</label>
                <textarea id="event-notes" name="notes" class="form-control" rows="3" placeholder="Any additional information about your event"></textarea>
              </div>
              
              <div class="form-check">
                <input type="checkbox" id="terms-checkbox" name="termsAgreed" class="form-check-input" required>
                <label for="terms-checkbox" class="form-check-label">I agree to the <a href="#">Terms and Conditions</a> *</label>
                <div class="form-feedback"></div>
              </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions">
              <button type="button" class="btn btn-outline-secondary" id="save-draft-btn">Save as Draft</button>
              <button type="submit" class="btn btn-primary" id="create-event-btn">Create Event</button>
            </div>
          </form>
        </div>
      </div>
    </section>
    
    <!-- Success Modal -->
    <div class="modal" id="success-modal">
      <div class="modal-overlay"></div>
      <div class="modal-container">
        <div class="modal-header">
          <h3 class="modal-title">Event Created Successfully!</h3>
          <button type="button" class="modal-close" id="close-success-modal">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div class="modal-body">
          <div class="success-content">
            <div class="success-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
            </div>
            <h4 class="success-title">Your event has been created!</h4>
            <p class="success-message">Your event has been successfully created and is now live.</p>
            
            <div class="event-reference">
              <span class="reference-label">Event ID:</span>
              <span class="reference-value" id="event-id">EVT123456</span>
            </div>
            
            <div class="success-actions">
              <button type="button" class="btn btn-outline-primary" id="view-event-btn">View Event</button>
              <button type="button" class="btn btn-primary" id="create-another-btn">Create Another Event</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Footer Component (will be loaded via JavaScript) -->
  <footer id="site-footer" class="site-footer"></footer>
  
  <!-- JavaScript Files -->
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/theme-toggle.js"></script>
  <script src="/assets/js/auth.js"></script>
  <script src="/assets/js/events.js"></script>
  <script src="/assets/js/storage.js"></script>
  <script src="/assets/js/navigation.js"></script>
  <script src="/assets/js/animations.js"></script>
  <script src="/assets/js/validation.js"></script>
  <script src="/assets/js/utils.js"></script>
  
  <!-- Page-specific JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is authenticated
      const isAuthenticated = checkAuthentication();
      
      if (!isAuthenticated) {
        // Redirect to login page if not authenticated
        window.location.href = '/pages/login.html?redirect=' + encodeURIComponent(window.location.href);
        return;
      }
      
      // Character counter for description
      const descriptionField = document.getElementById('event-description');
      const charCounter = document.getElementById('description-chars');
      
      if (descriptionField && charCounter) {
        descriptionField.addEventListener('input', function() {
          const count = this.value.length;
          charCounter.textContent = count;
          
          if (count > 500) {
            charCounter.classList.add('text-danger');
          } else {
            charCounter.classList.remove('text-danger');
          }
        });
      }
      
      // Location type toggle
      const physicalRadio = document.getElementById('physical-location');
      const virtualRadio = document.getElementById('virtual-location');
      const physicalFields = document.getElementById('physical-location-fields');
      const virtualFields = document.getElementById('virtual-location-fields');
      
      if (physicalRadio && virtualRadio && physicalFields && virtualFields) {
        physicalRadio.addEventListener('change', function() {
          if (this.checked) {
            physicalFields.classList.remove('hidden');
            virtualFields.classList.add('hidden');
            
            // Make physical fields required
            document.getElementById('venue-name').required = true;
            document.getElementById('venue-address').required = true;
            document.getElementById('venue-city').required = true;
            document.getElementById('venue-state').required = true;
            document.getElementById('venue-zip').required = true;
            
            // Make virtual fields not required
            document.getElementById('virtual-event-url').required = false;
            document.getElementById('virtual-platform').required = false;
          }
        });
        
        virtualRadio.addEventListener('change', function() {
          if (this.checked) {
            virtualFields.classList.remove('hidden');
            physicalFields.classList.add('hidden');
            
            // Make virtual fields required
            document.getElementById('virtual-event-url').required = true;
            document.getElementById('virtual-platform').required = true;
            
            // Make physical fields not required
            document.getElementById('venue-name').required = false;
            document.getElementById('venue-address').required = false;
            document.getElementById('venue-city').required = false;
            document.getElementById('venue-state').required = false;
            document.getElementById('venue-zip').required = false;
          }
        });
      }
      
      // Free event checkbox
      const freeEventCheckbox = document.getElementById('free-event');
      const ticketPriceField = document.getElementById('ticket-price');
      
      if (freeEventCheckbox && ticketPriceField) {
        freeEventCheckbox.addEventListener('change', function() {
          if (this.checked) {
            ticketPriceField.value = '0';
            ticketPriceField.disabled = true;
          } else {
            ticketPriceField.disabled = false;
          }
        });
      }
      
      // All-day event checkbox
      const allDayCheckbox = document.getElementById('all-day-event');
      const startTimeField = document.getElementById('event-time');
      const endTimeField = document.getElementById('event-end-time');
      
      if (allDayCheckbox && startTimeField && endTimeField) {
        allDayCheckbox.addEventListener('change', function() {
          if (this.checked) {
            startTimeField.value = '00:00';
            endTimeField.value = '23:59';
            startTimeField.disabled = true;
            endTimeField.disabled = true;
          } else {
            startTimeField.disabled = false;
            endTimeField.disabled = false;
          }
        });
      }
      
      // Image preview
      const imageInput = document.getElementById('event-image');
      const previewImage = document.getElementById('preview-image');
      const removeImageBtn = document.getElementById('remove-image');
      
      if (imageInput && previewImage && removeImageBtn) {
        imageInput.addEventListener('change', function(e) {
          if (e.target.files && e.target.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
              previewImage.src = e.target.result;
            };
            
            reader.readAsDataURL(e.target.files[0]);
          }
        });
        
        removeImageBtn.addEventListener('click', function() {
          imageInput.value = '';
          previewImage.src = '/assets/images/events/placeholder.jpg';
        });
      }
      
      // Form validation and submission
      const createEventForm = document.getElementById('create-event-form');
      const successModal = document.getElementById('success-modal');
      const closeSuccessModal = document.getElementById('close-success-modal');
      const viewEventBtn = document.getElementById('view-event-btn');
      const createAnotherBtn = document.getElementById('create-another-btn');
      
      if (createEventForm) {
        createEventForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Validate form
          if (!validateEventForm()) {
            return;
          }
          
          // Get form data
          const formData = new FormData(createEventForm);
          const eventData = {};
          
          for (const [key, value] of formData.entries()) {
            eventData[key] = value;
          }
          
          // Add additional data
          eventData.id = generateEventId();
          eventData.createdAt = new Date().toISOString();
          eventData.createdBy = getCurrentUser().id;
          
          // Save event to local storage
          saveEvent(eventData);
          
          // Show success modal
          document.getElementById('event-id').textContent = eventData.id;
          successModal.classList.add('show');
          document.body.classList.add('modal-open');
        });
      }
      
      // Save as draft button
      const saveDraftBtn = document.getElementById('save-draft-btn');
      
      if (saveDraftBtn) {
        saveDraftBtn.addEventListener('click', function() {
          // Get form data
          const formData = new FormData(createEventForm);
          const eventData = {};
          
          for (const [key, value] of formData.entries()) {
            eventData[key] = value;
          }
          
          // Add additional data
          eventData.id = generateEventId();
          eventData.createdAt = new Date().toISOString();
          eventData.createdBy = getCurrentUser().id;
          eventData.status = 'draft';
          
          // Save event to local storage
          saveEvent(eventData);
          
          // Show notification
          showNotification('Event saved as draft', 'success');
        });
      }
      
      // Success modal actions
      if (closeSuccessModal) {
        closeSuccessModal.addEventListener('click', function() {
          successModal.classList.remove('show');
          document.body.classList.remove('modal-open');
        });
      }
      
      if (viewEventBtn) {
        viewEventBtn.addEventListener('click', function() {
          const eventId = document.getElementById('event-id').textContent;
          window.location.href = `/pages/event-details.html?id=${eventId}`;
        });
      }
      
      if (createAnotherBtn) {
        createAnotherBtn.addEventListener('click', function() {
          successModal.classList.remove('show');
          document.body.classList.remove('modal-open');
          createEventForm.reset();
          previewImage.src = '/assets/images/events/placeholder.jpg';
        });
      }
      
      // Helper functions
      function validateEventForm() {
        // This would normally validate all form fields
        // For now, we'll just return true
        return true;
      }
      
      function generateEventId() {
        return 'EVT' + Math.floor(100000 + Math.random() * 900000);
      }
      
      function saveEvent(eventData) {
        // Get existing events from local storage
        let events = JSON.parse(localStorage.getItem('events')) || [];
        
        // Add new event
        events.push(eventData);
        
        // Save back to local storage
        localStorage.setItem('events', JSON.stringify(events));
      }
      
      function getCurrentUser() {
        // Get current user from session
        const session = JSON.parse(localStorage.getItem('session'));
        return session ? session.user : null;
      }
      
      function checkAuthentication() {
        // Check if user is logged in
        const session = localStorage.getItem('session');
        return !!session;
      }
      
      function showNotification(message, type) {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
          <div class="notification-content">
            <span class="notification-message">${message}</span>
            <button type="button" class="notification-close">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        `;
        
        // Add to document
        document.body.appendChild(notification);
        
        // Show notification
        setTimeout(() => {
          notification.classList.add('show');
        }, 10);
        
        // Auto-hide after 5 seconds
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            notification.remove();
          }, 300);
        }, 5000);
        
        // Close button
        const closeBtn = notification.querySelector('.notification-close');
        closeBtn.addEventListener('click', function() {
          notification.classList.remove('show');
          setTimeout(() => {
            notification.remove();
          }, 300);
        });
      }
    });
  </script>
</body>
</html>